# Resonance Network Wallet

A mobile wallet application for the Resonance Network blockchain and its native REZ cryptocurrency.

## Features

- **Welcome Screen**: Create a new wallet or import an existing one
- **Create Wallet**: Generates a 24-word recovery phrase for a new wallet
- **Import Wallet**: Restore access using a 12 or 24-word recovery phrase
- **Main Wallet Screen**: View balance and recent transactions
- **Send REZ**: Send cryptocurrency to other accounts
- **Receive REZ**: Display QR code with your wallet address
- **Identity Support**: Display human-readable names for accounts when available

## Getting Started

### Prerequisites

- Flutter 3.3.0 or higher

### Installation

1. Clone this repository
```
git clone git@github.com:Resonance-Network/resonance-mobile-app.git
```

2. Navigate to the project directory
```
cd resonance-mobile-app
```

3. Install dependencies
```
flutter pub get
```

4. Run the app
```
flutter run
```

## Tech Notes

- This is a proof of concept wallet - do not use for real accounts, or real keys!
- We use Polkadart to access the chain
- We use rust bindings to generate signatures and PQ hashes
- Both polkadart and rust bindings generate code - do not modify generated code by hand.

### Polkadart Tech Notes

- The wallet uses polkadot_dart with some modifications for Substrate blockchain interactions
- Added a payload class called ResonanceExtrinsicPayload - this re-implements existing payload
class in Polkadart, but allows for our custom signature types. Changing signature type is not supported
in plain Polkadart.  
- Runtime calls are constructed in vanilla Polkadart using the generated code
- Resonance chain custom classes are generated from metadata - run the script 
regenerate_runtime_apis.sh to update these generated classes. This uses polkadart_cli to do the job.
- We avoid directly loading metadata from chain because the import class has a bug reported here:
https://github.com/leonardocustodio/polkadart/issues/580
- Generated files are in lib/generated, as configured in pubspec.yaml
- The sh file runs dart fix on the generated code so there's not 1000s of warnings.

```bash
regenerate_runtime_apis.sh
```

### Rust Bindings Tech Notes
- Rust bindings are generated by Flutter Rust Bridge
- Run 'flutter_rust_bridge_codegen generate' to update the generated classes
- Use flutter rust bridge as in the example
- Generated flutter code for Rust bindings is in /lib/src/rust
- Rust bindings do not cover functions on structs, so all functions we need are exposed in a flat file
- Keeping the rust code as simple as possible.

```bash
flutter_rust_bridge_codegen generate
```

## To do

- This is a proof of concept showing how to implement a flutter app running post quantum secure signatures.
- Proper user interface
- Proper number formatting for display and send
- Splitting classes into files and folders
- Encrypt private keys on device (just use secure enclave through flutter)

## License

This project is licensed under the MIT License - see the LICENSE file for details. 